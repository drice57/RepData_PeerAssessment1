{
    "contents" : "---\ntitle: \"Reproducible Research Project 1\"\noutput:\n  html_document:\n    keep_md: yes\n---\n\n\n### Introduction\n\nIt is now possible to collect a large amount of data about personal movement using activity monitoring devices such as a Fitbit, Nike Fuelband, or Jawbone Up. These type of devices are part of the “quantified self” movement – a group of enthusiasts who take measurements about themselves regularly to improve their health, to find patterns in their behavior, or because they are tech geeks. But these data remain under-utilized both because the raw data are hard to obtain and there is a lack of statistical methods and software for processing and interpreting the data.\n\nThis assignment makes use of data from a personal activity monitoring device. This device collects data at 5 minute intervals through out the day. The data consists of two months of data from an anonymous individual collected during the months of October and November, 2012 and include the number of steps taken in 5 minute intervals each day.\n\n### Data\n\nThe data for this assignment can be downloaded from the course web site:\n\n- Dataset: Activity monitoring data [52K]\n\nThe variables included in this dataset are:\n\n- steps: Number of steps taking in a 5-minute interval (missing values are coded as NA)\n\n- date: The date on which the measurement was taken in YYYY-MM-DD format\n\n- interval: Identifier for the 5-minute interval in which measurement was taken\n\nThe dataset is stored in a comma-separated-value (CSV) file and there are a total of 17,568 observations in this dataset.\n\n### Loading and preprocessing the data\n\n*1. Load the data (i.e. read.csv())*\n\n*2.Process/transform the data (if necessary) into a format suitable for your analysis*\n\nData is loaded from the supplied file \"activity.csv\".  The \"interval\" field in the file is decimal numbers of the 5-minute intervals.  First step is to convert them to time (hours, minutes).  The date field in the file is text, needs to be converted to type Date.\n\n```{r, echo=TRUE}\n\n## Load data, identify NA values\ndata <- read.csv(\"activity.csv\", header=TRUE, sep=\",\", na.strings = \"NA\",\n    stringsAsFactors = FALSE)\n\ndata$dateTime <- strptime(sprintf(\"%s %02d:%02d\", data$date, \n    data$interval %/% 100, data$interval %% 100),\"%Y-%m-%d %H:%M\")\n\ndata$date <- as.Date(data$date)\n```\n\n### What is total number of steps taken per day?\n\n*For this part of the assignment, you can ignore the missing values in the dataset.*\n\nTo make a histogram of the number of steps walked each day, and to calculate the mean and median number of steps per day, we will create a table summarizing the total number of steps for each day, using the aggregate function.\n\n```{r, echo=TRUE}\n## Summarize total steps per day\ndataStepsByDay <- aggregate(data$steps, by=list(data$date), \n      FUN=sum, na.rm=TRUE)\n\nnames(dataStepsByDay) <- c(\"date\", \"totalSteps\") # fix headings\n```\n\n*1. Make a histogram of the total number of steps taken each day.*\n\n```{r, echo=TRUE}\n## Plot number of steps walked by day\nplot(dataStepsByDay$date,dataStepsByDay$totalSteps, type=\"h\",\n    xlab=\"Date\",ylab=\"Total # steps\",\n    main=\"Histogram of steps walked per day\")\n```\n\n*2. Calculate and report the mean and median total number of steps taken per day.*\n\n```{r, echo=TRUE}\n## Calculate and print mean number of steps per day\ndailyMeanSteps <- round(mean(dataStepsByDay$totalSteps, na.rm=TRUE))\nprint(sprintf(\"Mean number of steps per day is %d\", dailyMeanSteps))\n\n## Calculate and print median number of steps per day\ndailyMedianSteps <- round(median(dataStepsByDay$totalSteps, na.rm=TRUE))\nprint(sprintf(\"Median number of steps per day is %d\", dailyMedianSteps))\n\n## Calculate and print maximum number of steps per day, \n## and date when max took place\ndailyMaxSteps  <- round(max(dataStepsByDay$totalSteps, na.rm=TRUE))\ndateMaxSteps <- dataStepsByDay[dataStepsByDay$totalSteps==dailyMaxSteps,1]\nprint(sprintf(\"Max number of steps per day is %d, which occured on %s\",\n      dailyMaxSteps, dateMaxSteps))\n```\n\n### What is the average daily activity pattern?\n\nNow summarize the data by 5-minute intervals, and calculate the mean of each, using the aggregate function.  Convert the intervals to clock time for plotting.\n\n```{r, echo=TRUE}\n## Summarize by time of day (5 minute intervals)\ndataStepsByTime <- aggregate(data$steps, by=list(data$interval), FUN=mean,\n        na.rm=TRUE)\n\nnames(dataStepsByTime) <- c(\"interval\",\"meanSteps\") ## correct names\n\n## Convert interval to time of day (date is arbitrary)\ndataStepsByTime$dateTime <- strptime(sprintf(\"%s %02d:%02d\", \"2014-07-01\", \n    dataStepsByTime$interval %/% 100, \n    dataStepsByTime$interval %% 100),\"%Y-%m-%d %H:%M\")\n```\n\n*1. Make a time series plot (i.e. type = \"l\") of the 5-minute interval (x-axis) and the average number of steps taken, averaged across all days (y-axis)*\n\n```{r, echo=TRUE}\n## Plot average number of steps by time of day\nplot(dataStepsByTime$dateTime, dataStepsByTime$meanSteps,type=\"l\",\n    xlab=\"Time of day\",ylab=\" Average # steps\",\n    main=\"Time series plot of average steps walked \n    \\nby time of day (5 minute intervals)\")\n```\n\n*2. Which 5-minute interval, on average across all the days in the dataset, contains the maximum number of steps?*\n\n```{r}\n## Calculate and print maximum average no. of steps per time interval,\n## and interval when max took place\n\ntimeMaxSteps  <- max(dataStepsByTime$meanSteps, na.rm=TRUE)\n\ntimeOfMaxSteps <- dataStepsByTime[dataStepsByTime$meanSteps\n      ==timeMaxSteps,3]\n\np <- \"The max of the average number of steps in a 5-min period is %d,\"\np <- paste(p,\"starting at %s\")\n\nprint(sprintf(p,round(timeMaxSteps), \n  substr(as.character(timeOfMaxSteps),12,16)))\n```\n\n### Imputing missing values\n\n*Note that there are a number of days/intervals where there are missing values (coded as NA). The presence of missing days may introduce bias into some calculations or summaries of the data.*\n\n*1. Calculate and report the total number of missing values in the dataset (i.e. the total number of rows with NAs)*\n\n```{r, echo=TRUE}\n## Count and print number of NAs\nprint(sprintf(\"Number of 5-minute intervals with no data is %d.\",sum(is.na(data$steps))))\n```\n\nNow look at where the missing values are.\n\n```{r,echo=TRUE}\n## Create a subset of the rows with NA in steps column\ndataSubset <- data[is.na(data$steps),]\n\n## Replace the NAs with 1, then aggregate to get a list of dates and the number of NAs on that date\ndataSubset$steps<-1\ndatesNA <- aggregate(dataSubset$steps,by=list(dataSubset$date), FUN=sum)\nnames(datesNA) <- c(\"date\",\"# of NAs\")\nprint(sprintf(\"Dates with missing values, and number of missing:\"))\nprint(datesNA)\n```\n\n**Note that all of the missing values are on 8 specific dates, and all values for those days are missing.  (There are 288 5-minute periods in each day, 24 hours/day x 12 5-minute periods/hour.)  If we had access to the provider of the original data, we would follow up on that point.**\n\n*2. Devise a strategy for filling in all of the missing values in the dataset. The strategy does not need to be sophisticated. For example, you could use the mean/median for that day, or the mean for that 5-minute interval, etc.*\n\n*3. Create a new dataset that is equal to the original dataset but with the missing data filled in.*\n\nThe strategy adopted here was to substitute the mean for the applicable 5-minute period for each element of missing data. Since this will have the effect of reinforcing the average, and since all of the missing data is on entire days, an alternative would be to simply ignore the missing days. \n\n```{r,echo=TRUE}\n## Copy original data file, replace NAs with average for the 5-minute interval\ndataReplaceNA <- data\ndataReplaceNA$steps<-ifelse(is.na(dataReplaceNA$steps),\n    dataStepsByTime[(dataReplaceNA$interval %/% 100)*12\n    + (dataReplaceNA$interval %% 100)/5 +1,2],dataReplaceNA$steps)\n\n## Recreate the histogram of steps walked by day, with NAs replaced\ndataStepsByDay <- aggregate(dataReplaceNA$steps, \n    by=list(dataReplaceNA$date), FUN=sum)\n\nnames(dataStepsByDay) <- c(\"date\", \"totalSteps\") ## correct names\n```\n\n*4. Make a histogram of the total number of steps taken each day and Calculate and report the mean and median total number of steps taken per day. *\n\n\n```{r, echo=TRUE}\nplot(dataStepsByDay$date,dataStepsByDay$totalSteps, type=\"h\",\n    xlab=\"Date\",ylab=\"# steps\",main=\"Histogram of steps walked per day\")\n\n## Calculate and print mean number of steps per day\ndailyMeanSteps <- round(mean(dataStepsByDay$totalSteps))\nprint(sprintf(\"Mean number of steps per day is %d\", dailyMeanSteps))\n\n## Calculate and print median number of steps per day\ndailyMedianSteps <- round(median(dataStepsByDay$totalSteps))\nprint(sprintf(\"Median number of steps per day is %d\", dailyMedianSteps))\n```\n\n*Do these values differ from the estimates from the first part of the assignment? What is the impact of imputing missing data on the estimates of the total daily number of steps?*\n\nThey do differ, and both are now equal to the average day.  That's expected, as we used the average day to replace NAs.\n\n### Are there differences in activity patterns between weekdays and weekends?\n\n*For this part the weekdays() function may be of some help here. Use the dataset with the filled-in missing values for this part.*\n\n*1. Create a new factor variable in the dataset with two levels – “weekday” and “weekend” indicating whether a given date is a weekday or weekend day.*\n\n```{r, echo=TRUE}\n## Add new factor column with weekday vs. weekend distinction\ndataReplaceNA$weekend <- ifelse(\n    (substr(weekdays(as.Date(dataReplaceNA$date)),1,1) == \"S\"),\n    \"weekend\",\"weekday\")\n\ndataReplaceNA$weekend<- as.factor(dataReplaceNA$weekend)\n```\n\n*2. Make a panel plot containing a time series plot (i.e. type = \"l\") of the 5-minute interval (x-axis) and the average number of steps taken, averaged across all weekday days or weekend days (y-axis).*\n\n(For purposes of this plot, the \"intervals\" were not converted to clock time; lattice plot for some reason can't handle the date/time format that base plotting system used.  As a result, there are gaps every hour for the HH:60 to HH:99 non-existent intervals.  At the scale of these plots, this is only a minor issue.)\n\n```{r, echo=TRUE}\n## Summarize by time of day (5 minute intervals), contingent on weekday vs. weekend\ndataStepsByTime <- aggregate(dataReplaceNA$steps, by=list(dataReplaceNA$interval, dataReplaceNA$weekend), FUN=mean, na.rm=TRUE)\nnames(dataStepsByTime) <- c(\"interval\",\"weekend\", \"meanSteps\")\n\n## Convert interval to time of day (date is arbitrary)\ndataStepsByTime$dateTime <- strptime(sprintf(\"%s %02d:%02d\", \"2014-07-01\", \n    dataStepsByTime$interval %/% 100, \n    dataStepsByTime$interval %% 100),\"%Y-%m-%d %H:%M\")\n\n## Load lattice library for this plot\nlibrary(lattice)\n\n## Plot average number of steps by time of day, with 2 panels:  \n## weekday vs. weekend\np <- xyplot(meanSteps ~ interval | weekend, data=dataStepsByTime, \n    layout = c(1,2), type=\"l\", \n    xlab=\"Time of day\", ylab=\"Average number of steps\", \n    main=\"Weekday vs. weekend\")\nprint(p)\n```\n\nAn examination of the weekend vs. weekday plots shows ...",
    "created" : 1405729709355.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1702577805",
    "id" : "5B3F23D7",
    "lastKnownWriteTime" : 1405796027,
    "path" : "~/20100513/Developer/Online classes/Data Science (2014)/5 - Reproducible Research/Project 1/RepData_PeerAssessment1/Project1.Rmd",
    "project_path" : "Project1.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}